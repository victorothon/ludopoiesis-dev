import{a as C,f as k}from"../chunks/b3-Pe2so.js";import{i as Ds}from"../chunks/BXPxOHRk.js";import{A as zs,B as Es,C as Ts,D as js,p as Bs,o as Os,t as x,b as Ps,g as e,c as a,d as r,s as y,m as E,r as s,n as Vs}from"../chunks/DuSW7asp.js";import{e as M,s as o}from"../chunks/BiHBEveS.js";import{B as Rs,i as ps,s as Ys,a as Q}from"../chunks/DXT5HSOw.js";import{h as U,C as Fs,L as Gs,a as Hs,l as Is,n as _s,s as bs,i as Js,d as Ks,e as Qs,f as Us,j as ys,t as ms,k as hs}from"../chunks/DVO3rl4H.js";const Ws=Symbol("NaN");function Xs(T,j,i){zs&&Es();var B=new Rs(T),O=!Ts();js(()=>{var d=j();d!==d&&(d=Ws),O&&d!==null&&typeof d=="object"&&(d={}),B.ensure(d,i)})}var Zs=k('<div class="spread-position svelte-ds72y6"><div class="position-header svelte-ds72y6"><div class="position-label svelte-ds72y6"> </div> <div class="position-sub svelte-ds72y6"> </div></div> <!></div>'),sa=k('<div class="spread-position empty svelte-ds72y6"><div class="position-header svelte-ds72y6"><div class="position-label svelte-ds72y6"> </div> <div class="position-sub svelte-ds72y6"> </div></div> <div class="empty-card svelte-ds72y6"><i class="fa fa-question"></i></div></div>'),aa=k('<button><span class="dot-name svelte-ds72y6"> </span></button>'),ea=k('<div class="mobile-card-display svelte-ds72y6"><div class="position-header svelte-ds72y6"><div class="position-label svelte-ds72y6"> </div> <div class="position-sub svelte-ds72y6"> </div></div> <!></div>'),ta=k('<button class="btn btn-primary svelte-ds72y6"><i class="fa fa-sparkles"></i> </button>'),ra=k('<button class="btn btn-secondary svelte-ds72y6"><i class="fa fa-rotate-right"></i> </button>'),ia=k('<div class="mobile-card-screen svelte-ds72y6"><div class="mobile-dots svelte-ds72y6"></div> <!> <div class="mobile-bottom-actions svelte-ds72y6"><!> <button class="btn btn-ghost svelte-ds72y6"> </button></div></div>'),na=k('<div><header class="header svelte-ds72y6"><a href="/" class="back-link svelte-ds72y6"><i class="fa fa-arrow-left"></i> Volver</a> <h1 class="svelte-ds72y6"><span class="title-main svelte-ds72y6"> </span> <span class="title-sub svelte-ds72y6"> </span></h1></header> <main class="main-content svelte-ds72y6"><div class="spread-info svelte-ds72y6"><p> </p></div> <div class="three-card-spread svelte-ds72y6"><!> <!></div></main> <!> <!> <aside class="control-panel svelte-ds72y6"><div class="control-inner svelte-ds72y6"><div class="instructions svelte-ds72y6"><div class="step svelte-ds72y6"><h3 class="svelte-ds72y6">Escoge tus lentes</h3></div> <div class="lens-section svelte-ds72y6"><!></div> <div class="progress-indicator svelte-ds72y6"><p> </p></div> <div class="action-buttons svelte-ds72y6"><button class="btn btn-primary svelte-ds72y6"><i class="fa fa-sparkles"></i> </button> <button class="btn btn-secondary svelte-ds72y6"><i class="fa fa-rotate-right"></i> Nueva Lectura</button></div> <div class="language-section svelte-ds72y6"><!></div></div></div></aside></div>');function pa(T,j){Bs(j,!1);const i=()=>Q(Js,"$idioma",d),B=()=>Q(Us,"$cartasData",d),O=()=>Q(Qs,"$lentesActivos",d),[d,fs]=Ys();let t=E([]),A=0,P=E(null),N=E(0),m=E(0);const h=[{name:{es:"Mente",pt:"Mente"},sub:{es:"Lo que piensas",pt:"O que você pensa"}},{name:{es:"Corazón",pt:"Coração"},sub:{es:"Lo que sientes",pt:"O que você sente"}},{name:{es:"Manos",pt:"Mãos"},sub:{es:"Lo que haces",pt:"O que você faz"}}];Os(async()=>{await Is()});function W(){if(e(t).length>=3){alert(i()==="es"?"¡Ya has sacado las 3 cartas!":"Você já tirou as 3 cartas!");return}const v=Ks(B(),O(),i());if(!v){alert(i()==="es"?"No hay lentes activados. Por favor, activa al menos uno.":"Nenhuma lente ativada. Por favor, ative pelo menos uma.");return}y(t,[...e(t),{...v,positionName:h[A].name,positionSub:h[A].sub}]),A++,y(m,e(t).length-1),y(N,1)}function X(){y(t,[]),A=0,y(N,0),y(m,0)}function Z(v){y(P,v)}function gs(){y(P,null)}Ds();var D=na();let ss;var V=a(D),as=r(a(V),2),R=a(as),Cs=a(R,!0);s(R);var es=r(R,2),xs=a(es,!0);s(es),s(as),s(V);var Y=r(V,2),F=a(Y),ts=a(F),ks=a(ts,!0);s(ts),s(F);var rs=r(F,2),is=a(rs);U(is,3,()=>e(t),(v,u)=>v.id+u,(v,u,g)=>{var c=Zs(),f=a(c),p=a(f),w=a(p,!0);s(p);var q=r(p,2),L=a(q,!0);s(q),s(f);var J=r(f,2);ys(J,{get card(){return e(u)},scale:1,rotation:0,onEnlarge:Z}),s(c),x(()=>{o(w,e(u).positionName[i()]),o(L,e(u).positionSub[i()])}),ms(3,c,()=>hs,()=>({y:50,delay:e(g)*150,duration:400})),C(v,c)});var qs=r(is,2);U(qs,1,()=>Array(3-e(t).length),_s,(v,u,g)=>{var c=sa(),f=a(c),p=a(f),w=a(p,!0);s(p);var q=r(p,2),L=a(q,!0);s(q),s(f),Vs(2),s(c),x(()=>{o(w,h[e(t).length+g].name[i()]),o(L,h[e(t).length+g].sub[i()])}),C(v,c)}),s(rs),s(Y);var ns=r(Y,2);Fs(ns,{get card(){return e(P)},onClose:gs});var os=r(ns,2);{var Ls=v=>{var u=ia(),g=a(u);U(g,5,()=>h,_s,(_,n,l)=>{var b=aa();let z;var S=a(b),K=a(S,!0);s(S),s(b),x(()=>{z=bs(b,1,"dot svelte-ds72y6",null,z,{drawn:l<e(t).length,active:l===e(m)}),b.disabled=l>=e(t).length,o(K,e(n).name[i()])}),M("click",b,()=>l<e(t).length&&y(m,l)),C(_,b)}),s(g);var c=r(g,2);Xs(c,()=>e(m),_=>{var n=ea(),l=a(n),b=a(l),z=a(b,!0);s(b);var S=r(b,2),K=a(S,!0);s(S),s(l);var As=r(l,2);ys(As,{get card(){return e(t)[e(m)]},scale:1,rotation:0,onEnlarge:Z}),s(n),x(()=>{o(z,e(t)[e(m)].positionName[i()]),o(K,e(t)[e(m)].positionSub[i()])}),ms(3,n,()=>hs,()=>({y:30,duration:300})),C(_,n)});var f=r(c,2),p=a(f);{var w=_=>{var n=ta(),l=r(a(n));s(n),x(()=>o(l,` ${i()==="es"?"Sacar: "+h[e(t).length].name.es:"Tirar: "+h[e(t).length].name.pt}`)),M("click",n,W),C(_,n)},q=_=>{var n=ra(),l=r(a(n));s(n),x(()=>o(l,` ${i()==="es"?"Nueva Lectura":"Nova Leitura"}`)),M("click",n,X),C(_,n)};ps(p,_=>{e(t).length<3?_(w):_(q,!1)})}var L=r(p,2),J=a(L,!0);s(L),s(f),s(u),x(()=>o(J,i()==="es"?"Cambiar lentes":"Mudar lentes")),M("click",L,()=>y(N,0)),C(v,u)};ps(os,v=>{e(N)>0&&e(t)[e(m)]&&v(Ls)})}var vs=r(os,2),ls=a(vs),ds=a(ls),G=r(a(ds),2),Ms=a(G);Gs(Ms,{}),s(G);var H=r(G,2),cs=a(H),Ns=a(cs);s(cs),s(H);var I=r(H,2),$=a(I),$s=r(a($));s($);var ws=r($,2);s(I);var us=r(I,2),Ss=a(us);Hs(Ss,{}),s(us),s(ds),s(ls),s(vs),s(D),x(()=>{ss=bs(D,1,"page-container svelte-ds72y6",null,ss,{"mobile-card-view":e(N)>0}),o(Cs,i()==="es"?"Lectura de 3 Cartas":"Leitura de 3 Cartas"),o(xs,i()==="es"?"Mente • Corazón • Manos":"Mente • Coração • Mãos"),o(ks,i()==="es"?"Tres dimensiones de tu situación: lo que piensas, lo que sientes y lo que haces.":"Três dimensões da sua situação: o que você pensa, o que você sente e o que você faz."),o(Ns,`${e(t).length??""} / 3 cartas`),$.disabled=e(t).length>=3,o($s,` ${e(t).length<3?i()==="es"?"Sacar: "+h[e(t).length].name.es:"Tirar: "+h[e(t).length].name.pt:i()==="es"?"Lectura Completa":"Leitura Completa"}`)}),M("click",$,W),M("click",ws,X),C(T,D),Ps(),fs()}export{pa as component};
