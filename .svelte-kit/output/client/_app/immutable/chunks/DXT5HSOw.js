var K=Object.defineProperty;var Y=t=>{throw TypeError(t)};var Q=(t,e,s)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var U=(t,e,s)=>Q(t,typeof e!="symbol"?e+"":e,s),y=(t,e,s)=>e.has(t)||Y("Cannot "+s);var r=(t,e,s)=>(y(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>e.has(t)?Y("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),x=(t,e,s,a)=>(y(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s);import{O as F,P as V,Q as D,R as W,E as C,S as $,A as N,L as X,T as j,U as k,D as ee,B as te,V as se,W as ae,X as re,Y as ie,Z as ne,K as fe,J as H,_ as ue,a0 as ce,i as Z,m as oe,g as R,s as q,a1 as de,a2 as le,a3 as he,a4 as _e,a5 as ve,a6 as be,a7 as ge,a8 as Se,a9 as me,e as pe,aa as Te,ab as Ae,ac as Ee,y as Pe,u as Re,ad as Ie,ae as Oe}from"./DuSW7asp.js";import{s as De,g as Ne}from"./VBFvlmmS.js";var l,h,d,g,T,A,I;class Le{constructor(e,s=!0){U(this,"anchor");b(this,l,new Map);b(this,h,new Map);b(this,d,new Map);b(this,g,new Set);b(this,T,!0);b(this,A,()=>{var e=F;if(r(this,l).has(e)){var s=r(this,l).get(e),a=r(this,h).get(s);if(a)V(a),r(this,g).delete(s);else{var n=r(this,d).get(s);n&&(r(this,h).set(s,n.effect),r(this,d).delete(s),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),a=n.effect)}for(const[i,u]of r(this,l)){if(r(this,l).delete(i),i===e)break;const f=r(this,d).get(u);f&&(D(f.effect),r(this,d).delete(u))}for(const[i,u]of r(this,h)){if(i===s||r(this,g).has(i))continue;const f=()=>{if(Array.from(r(this,l).values()).includes(i)){var _=document.createDocumentFragment();j(u,_),_.append(C()),r(this,d).set(i,{effect:u,fragment:_})}else D(u);r(this,g).delete(i),r(this,h).delete(i)};r(this,T)||!a?(r(this,g).add(i),W(u,f,!1)):f()}}});b(this,I,e=>{r(this,l).delete(e);const s=Array.from(r(this,l).values());for(const[a,n]of r(this,d))s.includes(a)||(D(n.effect),r(this,d).delete(a))});this.anchor=e,x(this,T,s)}ensure(e,s){var a=F,n=k();if(s&&!r(this,h).has(e)&&!r(this,d).has(e))if(n){var i=document.createDocumentFragment(),u=C();i.append(u),r(this,d).set(e,{effect:$(()=>s(u)),fragment:i})}else r(this,h).set(e,$(()=>s(this.anchor)));if(r(this,l).set(a,e),n){for(const[f,c]of r(this,h))f===e?a.unskip_effect(c):a.skip_effect(c);for(const[f,c]of r(this,d))f===e?a.unskip_effect(c.effect):a.skip_effect(c.effect);a.oncommit(r(this,A)),a.ondiscard(r(this,I))}else N&&(this.anchor=X),r(this,A).call(this)}}l=new WeakMap,h=new WeakMap,d=new WeakMap,g=new WeakMap,T=new WeakMap,A=new WeakMap,I=new WeakMap;function Ue(t,e,s=!1){N&&te();var a=new Le(t),n=s?se:0;function i(u,f){if(N){const v=ae(t);var c;if(v===re?c=0:v===ie?c=!1:c=parseInt(v.substring(1)),u!==c){var _=ne();fe(_),a.anchor=_,H(!1),a.ensure(u,f),H(!0);return}}a.ensure(u,f)}ee(()=>{var u=!1;e((f,c=0)=>{u=!0,i(c,f)}),u||i(!1,null)},n)}let P=!1,L=Symbol();function ye(t,e,s){const a=s[e]??(s[e]={store:null,source:oe(void 0),unsubscribe:Z});if(a.store!==t&&!(L in s))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=Z;else{var n=!0;a.unsubscribe=De(t,i=>{n?a.source.v=i:q(a.source,i)}),n=!1}return t&&L in s?Ne(t):R(a.source)}function xe(){const t={};function e(){ue(()=>{for(var s in t)t[s].unsubscribe();ce(t,L,{enumerable:!1,value:!0})})}return[t,e]}function Me(t){var e=P;try{return P=!1,[t(),P]}finally{P=e}}function Fe(t,e,s,a){var w;var n=!ge||(s&Se)!==0,i=(s&me)!==0,u=(s&Oe)!==0,f=a,c=!0,_=()=>(c&&(c=!1,f=u?Re(a):a),f),v;if(i){var z=Ae in t||Ee in t;v=((w=de(t,e))==null?void 0:w.set)??(z&&e in t?o=>t[e]=o:void 0)}var m,M=!1;i?[m,M]=Me(()=>t[e]):m=t[e],m===void 0&&a!==void 0&&(m=_(),v&&(n&&le(),v(m)));var S;if(n?S=()=>{var o=t[e];return o===void 0?_():(c=!0,o)}:S=()=>{var o=t[e];return o!==void 0&&(f=void 0),o===void 0?f:o},n&&!(s&he))return S;if(v){var G=t.$$legacy;return function(o,E){return arguments.length>0?((!n||!E||G||M)&&v(E?S():o),o):S()}}var O=!1,p=(s&Ie?Pe:pe)(()=>(O=!1,S()));i&&R(p);var J=ve;return function(o,E){if(arguments.length>0){const B=E?R(p):n&&i?_e(o):o;return q(p,B),O=!0,f!==void 0&&(f=B),o}return Te&&O||J.f&be?p.v:R(p)}}export{Le as B,ye as a,Ue as i,Fe as p,xe as s};
